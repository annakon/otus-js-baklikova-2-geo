{"version":3,"file":"bundle.js","mappings":";4QACA,smNACO,SAAeA,IAAtB,iEAAO,iBAAAC,EAAA,oEAEK,QADJA,EAAIC,aAAaC,QAAQ,SAD1B,yCAGI,IAHJ,gCAKEC,KAAKC,MAAMJ,EAAG,KALhB,kEASA,SAASK,EAASC,GACvBL,aAAaM,QAAQ,OAAQJ,KAAKK,UAAUF,GAC7C,CAEM,SAASG,EAASC,EAAIJ,GAC3BI,EAAGC,UAAH,UAAkBL,EAAMM,KAAI,SAACF,GAAD,wBAAmBA,EAAnB,gBAAkCG,KAAK,IACpE,oPChBD,smNADA,IAAMC,EAAK,OAEJ,SAAeC,EAAtB,oEAAO,WAA4CC,GAA5C,4EACQ,KAATA,EADC,gCAEoBC,MAAM,uCAF1B,cAEGC,EAFH,gBAGgBA,EAASC,OAHzB,cAGGA,EAHH,yBAKIF,MAAM,uDAAD,OAC6CE,EAAKC,SADlD,gBACkED,EAAKE,UADvE,6CALT,gCAUEJ,MAAM,qDAAD,OAC2CD,EAD3C,6CAVP,kEAeA,SAAeM,EAAtB,sEAAO,WAA2BZ,EAAIM,GAA/B,UAYIO,EAZJ,wEAYIA,EAZJ,WAcW,IAAIC,MAAMC,IAAI,MAAO,CAKjCC,OAAQ,CAACC,EAAmBC,MAAMC,IAAKF,EAAmBC,MAAME,KAGhEC,KAAM,GAET,EAxBI,SACgChB,EAA6BC,GAD7D,cACCgB,EADD,gBAE4BA,EAAuBb,OAFnD,OAECQ,EAFD,OAICM,GAAQN,EAAmBO,KAAKD,KAAOnB,GAAIqB,QAAQ,GAEzDzB,EAAGC,UAAH,cAAsBgB,EAAmBS,KAAzC,mBAAwDH,EAAxD,+FACyEN,EAAmBU,QAAQ,GAAGC,KADvG,aAGAC,SAASC,eAAe,OAAO7B,UAAY,GAE3Ca,MAAMiB,MAAMlB,GAXP,sTChBP,8hGAAAmB,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,omBAEO,+FAECC,EAAOJ,SAASK,cAAc,QAC9BC,EAASN,SAASK,cAAc,kBAHjC,SAMe7C,IANf,cAMCO,EAND,OASLG,EAASoC,EAAQvC,GAEjBqC,EAAKG,iBAAiB,UAAU,SAACC,GAE/BA,EAAGC,iBAGH,IACMC,EADcF,EAAGG,OACGN,cAAc,SAChCO,EAAUF,EAAVE,MACRF,EAAME,MAAQ,GAGT7C,EAAM8C,SAASD,IAAQ7C,EAAM+C,KAAKF,GACnC7C,EAAMgD,OAAS,IAAIhD,EAAMiD,QAG7B9C,EAASoC,EAAQvC,GAGjBD,EAASC,GACTgB,EAAYiB,SAASK,cAAc,cAAeO,EACnD,IA/BI,kBAiCE7B,EAAYiB,SAASK,cAAc,cAAe,KAjCpD,kECAPY,OAAOC,KDAA,WAAP","sources":["webpack://otus-js-baklikova-2-geo/./src/localStorage.js","webpack://otus-js-baklikova-2-geo/./src/api.js","webpack://otus-js-baklikova-2-geo/./src/init.js","webpack://otus-js-baklikova-2-geo/./src/index.js"],"sourcesContent":["// Должна возвращать список пользователя\n// Если пользователь ничего не вводил - пустой список\nexport async function readList() {\n  const a = localStorage.getItem(\"list\");\n  if (a === null) {\n    return [];\n  }\n  return JSON.parse(a, []);\n}\n\n// Сохраняет список\nexport function saveList(items) {\n  localStorage.setItem(\"list\", JSON.stringify(items));\n}\n\nexport function drawList(el, items) {\n  el.innerHTML = `${items.map((el) => `<option>${el}</option>`).join(\"\")}`;\n}\n","const T0 = 273.15;\n\nexport async function returnResponseOpenweathermap(city) {\n  if (city === \"\") {\n    const response = await fetch(\"https://get.geojs.io/v1/ip/geo.json\");\n    const json = await response.json();\n\n    return fetch(\n      `https://api.openweathermap.org/data/2.5/weather?lat=${json.latitude}&lon=${json.longitude}&appid=2dd5152e26591562500eba5a006f9a67`\n    );\n  }\n\n  return fetch(\n    `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=2dd5152e26591562500eba5a006f9a67`\n  );\n}\n\nexport async function drawWeather(el, city) {\n  const responseOpenweathermap = await returnResponseOpenweathermap(city);\n  const jsonOpenweathermap = await responseOpenweathermap.json();\n\n  const temp = (jsonOpenweathermap.main.temp - T0).toFixed(0);\n\n  el.innerHTML = `<h1>${jsonOpenweathermap.name}</h1><p>${temp}&deg;</p>\n                   <img alt=\"icon\" src=\"http://openweathermap.org/img/wn/${jsonOpenweathermap.weather[0].icon}@2x.png\">`;\n\n  document.getElementById(\"map\").innerHTML = \"\";\n\n  ymaps.ready(initMap);\n  function initMap() {\n    // Создание карты.\n    const myMap = new ymaps.Map(\"map\", {\n      // Координаты центра карты.\n      // Порядок по умолчанию: «широта, долгота».\n      // Чтобы не определять координаты центра карты вручную,\n      // воспользуйтесь инструментом Определение координат.\n      center: [jsonOpenweathermap.coord.lat, jsonOpenweathermap.coord.lon],\n      // Уровень масштабирования. Допустимые значения:\n      // от 0 (весь мир) до 19.\n      zoom: 7,\n    });\n  }\n}\n","import { readList, saveList, drawList } from \"./localStorage\";\nimport { drawWeather } from \"./api\";\n\nexport async function init() {\n  // Получаем указатели на нужные элементы\n  const form = document.querySelector(\"form\");\n  const listEl = document.querySelector(\"#recentResults\");\n\n  // Читаем список при старте\n  const items = await readList();\n\n  // и отрисовываем список\n  drawList(listEl, items);\n\n  form.addEventListener(\"submit\", (ev) => {\n    // чтобы не перезагружать страницу\n    ev.preventDefault();\n\n    // читаем значение из формы\n    const formElement = ev.target;\n    const input = formElement.querySelector(\"input\");\n    const { value } = input;\n    input.value = \"\";\n\n    // добавляем элемент в список\n    if (!items.includes(value)) items.push(value);\n    if (items.length > 10) items.shift();\n\n    // обновляем список\n    drawList(listEl, items);\n\n    // сохраняем список\n    saveList(items);\n    drawWeather(document.querySelector(\"#container\"), value);\n  });\n\n  return drawWeather(document.querySelector(\"#container\"), \"\");\n}\n","import \"../css/styles.css\";\nimport { init } from \"./init\";\n\nwindow.init = init;\n\nexport default init;\n"],"names":["readList","a","localStorage","getItem","JSON","parse","saveList","items","setItem","stringify","drawList","el","innerHTML","map","join","T0","returnResponseOpenweathermap","city","fetch","response","json","latitude","longitude","drawWeather","initMap","ymaps","Map","center","jsonOpenweathermap","coord","lat","lon","zoom","responseOpenweathermap","temp","main","toFixed","name","weather","icon","document","getElementById","ready","i","form","querySelector","listEl","addEventListener","ev","preventDefault","input","target","value","includes","push","length","shift","window","init"],"sourceRoot":""}